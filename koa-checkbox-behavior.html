<!--
@license
Copyright (c) 2015 Team King of App. All rights reserved.
This code may only be used under the MIT license.
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-behaviors/iron-button-state.html">
<link rel="import" href="../iron-behaviors/iron-control-state.html">
<link rel="import" href="../iron-checked-element-behavior/iron-checked-element-behavior.html">

<script>
  Polymer.KoaCheckboxBehaviorImpl = {
    hostAttributes: {
      'aria-checked': false,
      role: 'checkbox',
      tabindex: 0
    },

    properties: {
      /**
       * Fired when the checked state changes due to user interaction.
       *
       * @event change
       */

      /**
       * Fired when the checked state changes.
       *
       * @event iron-change
       */
      ariaActiveAttribute: {
        type: String,
        value: 'aria-checked'
      }
    },

    _computeCheckboxClass: function(checked, invalid) {
      var className = '';
      if (checked) {
        className += 'checked ';
      }
      if (invalid) {
        className += 'invalid';
      }
      return className;
    },

    _computeCheckmarkClass: function(checked) {
      return checked ? '' : 'hidden';
    },

    /**
     * Synchronizes the element's `active` and `checked` state.
     */
    _buttonStateChanged: function() {
      if (this.disabled) {
        return;
      }
      if (this.isAttached) {
        this.checked = this.active;
      }
    }
  };

  Polymer.KoaCheckboxBehavior = [
    Polymer.IronButtonState,
    Polymer.IronControlState,
    Polymer.IronCheckedElementBehavior,
    Polymer.KoaCheckboxBehaviorImpl
  ];
</script>
